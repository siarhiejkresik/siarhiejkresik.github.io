!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=13)}([function(e,n){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t=function(e,n){var t=e[1]||"",r=e[3];if(!r)return t;if(n&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),a=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[t].concat(a).concat([i]).join("\n")}return[t].join("\n")}(n,e);return n[2]?"@media "+n[2]+"{"+t+"}":t}).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")"),n.push(o))}},n}},function(e,n,t){var r={},i=function(e){var n;return function(){return void 0===n&&(n=e.apply(this,arguments)),n}}(function(){return window&&document&&document.all&&!window.atob}),a=function(e){var n={};return function(e,t){if("function"==typeof e)return e();if(void 0===n[e]){var r=function(e,n){return n?n.querySelector(e):document.querySelector(e)}.call(this,e,t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}n[e]=r}return n[e]}}(),o=null,s=0,c=[],u=t(4);function l(e,n){for(var t=0;t<e.length;t++){var i=e[t],a=r[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](i.parts[o]);for(;o<i.parts.length;o++)a.parts.push(b(i.parts[o],n))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(b(i.parts[o],n));r[i.id]={id:i.id,refs:1,parts:s}}}}function d(e,n){for(var t=[],r={},i=0;i<e.length;i++){var a=e[i],o=n.base?a[0]+n.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(s):t.push(r[o]={id:o,parts:[s]})}return t}function f(e,n){var t=a(e.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):t.insertBefore(n,t.firstChild),c.push(n);else if("bottom"===e.insertAt)t.appendChild(n);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(e.insertAt.before,t);t.insertBefore(n,i)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var n=c.indexOf(e);n>=0&&c.splice(n,1)}function p(e){var n=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return t.nc}();r&&(e.attrs.nonce=r)}return v(n,e.attrs),f(e,n),n}function v(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function b(e,n){var t,r,i,a;if(n.transform&&e.css){if(!(a="function"==typeof n.transform?n.transform(e.css):n.transform.default(e.css)))return function(){};e.css=a}if(n.singleton){var c=s++;t=o||(o=p(n)),r=g.bind(null,t,c,!1),i=g.bind(null,t,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=function(e){var n=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(n,e.attrs),f(e,n),n}(n),r=function(e,n,t){var r=t.css,i=t.sourceMap,a=void 0===n.convertToAbsoluteUrls&&i;(n.convertToAbsoluteUrls||a)&&(r=u(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,t,n),i=function(){h(t),t.href&&URL.revokeObjectURL(t.href)}):(t=p(n),r=function(e,n){var t=n.css,r=n.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}.bind(null,t),i=function(){h(t)});return r(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;r(e=n)}else i()}}e.exports=function(e,n){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(n=n||{}).attrs="object"==typeof n.attrs?n.attrs:{},n.singleton||"boolean"==typeof n.singleton||(n.singleton=i()),n.insertInto||(n.insertInto="head"),n.insertAt||(n.insertAt="bottom");var t=d(e,n);return l(t,n),function(e){for(var i=[],a=0;a<t.length;a++){var o=t[a];(s=r[o.id]).refs--,i.push(s)}e&&l(d(e,n),n);for(a=0;a<i.length;a++){var s;if(0===(s=i[a]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete r[s.id]}}}};var m=function(){var e=[];return function(n,t){return e[n]=t,e.filter(Boolean).join("\n")}}();function g(e,n,t,r){var i=t?"":r.css;if(e.styleSheet)e.styleSheet.cssText=m(n,i);else{var a=document.createTextNode(i),o=e.childNodes;o[n]&&e.removeChild(o[n]),o.length?e.insertBefore(a,o[n]):e.appendChild(a)}}},function(e,n,t){var r=t(3);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};t(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,n,t){(n=e.exports=t(0)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro:300);",""]),n.push([e.i,":root {\n  --cards: 1;\n  --w: 90vmin;\n  --m: 5vmin;\n}\n\nhtml,\nbody,\n.app {\n  height: 100%;\n  min-height: 100%;\n}\n\nbody {\n  font-family: 'Source Sans Pro', sans-serif;\n  font-size: 16px;\n  font-weight: 300;\n\n  overflow: hidden;\n\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n\n  background: gainsboro;\n}\n\n.app {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n\n  width: 100vw;\n\n  background: radial-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.9));\n}\n\n.bottom {\n  touch-action: none;\n  position: relative;\n  display: flex;\n  overflow: hidden;\n  align-items: stretch;\n\n  height: 100%;\n  width: calc(var(--cards) * (2 * var(--m) + var(--w)));\n \n  transition: width 0.5s;\n}\n\n.bottom:before {\n  content: '';\n  position: absolute;\n  top: 0%;\n  left: 0%;\n  width: 100%;\n  height: 100%;\n  opacity: 0.7;\n  z-index: -1;\n  background-image: url('https://upload.wikimedia.org/wikipedia/commons/8/8b/YouTube_dark_icon_%282017%29.svg');\n  background-image: url('https://upload.wikimedia.org/wikipedia/commons/e/e1/Logo_of_YouTube_%282015-2017%29.svg');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 80vmin;\n}\n\n@media only screen and (min-width: 600px) {\n  :root {\n    --w: 300px;\n    --m: 20px;\n  }\n}\n\n@media only screen and (min-width: 1200px) {\n  :root {\n    --w: 400px;\n    --m: 20px;\n  }\n  .bottom {\n    max-height: 70%;\n  }\n  .bottom:before {\n    background-size: 30vmin;\n  }\n}\n",""])},function(e,n){e.exports=function(e){var n="undefined"!=typeof window&&window.location;if(!n)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var t=n.protocol+"//"+n.host,r=t+n.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,n){var i,a=n.trim().replace(/^"(.*)"$/,function(e,n){return n}).replace(/^'(.*)'$/,function(e,n){return n});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?t+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,n,t){var r=t(6);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};t(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,n,t){(e.exports=t(0)(!1)).push([e.i,".search {\n  font-family: inherit;\n  font-size: 1.5em;\n  font-weight: 300;\n  line-height: 1em;\n\n  max-width: 90vw;\n  margin: 5vmin;\n  margin-bottom: 0;\n  padding: 0.25em 1em;\n\n  transition: background 0.5s;\n\n  color: white;\n  border: 4px solid transparent;\n  border-radius: 5px;\n  background: black;\n  box-shadow: 0 0 3px 0 rgb(65, 65, 65);\n}\n\n.search:focus {\n  transition: background 0.25s;\n\n  color: black;\n  outline: unset;\n  background: white;\n}\n\n@media only screen and (min-width: 600px) {\n  .search {\n    margin-bottom: 5vmin;\n  }\n}\n",""])},function(e,n,t){var r=t(8);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};t(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,n,t){(e.exports=t(0)(!1)).push([e.i,".clips {\n  display: flex;\n  align-items: stretch;\n  transition: transform 0.25s;\n\n}\n\n@media only screen and (min-width: 600px) {\n  .clips {\n    transition: transform 1.25s cubic-bezier(0.2, 0.6, 0.19, 0.99);\n  }\n}\n",""])},function(e,n,t){var r=t(10);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};t(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,n,t){(e.exports=t(0)(!1)).push([e.i,".card {\n  overflow: hidden;\n\n  width: var(--w);\n  margin: var(--m);\n  border-radius: 5px;\n\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n\n  color: black;\n  border-bottom: 1em solid transparent;\n  background: gainsboro;\n  box-shadow: 0 0 20px 0 rgba(255, 255, 255, 0.377);\n  animation: slide-from-right 1s;\n}\n\n.card-header {\n  overflow: hidden;\n\n  height: calc(var(--w) / 1.8);\n\n  background: rgba(0, 0, 0, 0.705);\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size: cover;\n}\n\n.card-header a {\n  text-decoration: none;\n}\n\n.card-header h2 {\n  font-size: 1.25em;\n  font-weight: 300;\n\n  margin: 0;\n  margin-top: 1em;\n  padding: 0.25em 0.75em;\n  border-radius: 1px;\n\n  transition: transform 0.5s;\n\n  color: white;\n  background-color: rgba(0, 0, 0, 0.6);\n  text-shadow: 0 0 20px white;\n}\n\n.card-header h2:hover {\n  transform: translateX(0.5em);\n}\n\n.card-body {\n  margin: 1em;\n\n  overflow-wrap: break-word;\n}\n\n@keyframes slide-from-right {\n  from {\n    transform: translate3d(200%, 0, 0);\n  }\n\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n\n@media only screen and (min-width: 600px) {\n  .card {\n    border-radius: 0;\n  }\n}\n",""])},function(e,n,t){var r=t(12);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};t(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,n,t){(e.exports=t(0)(!1)).push([e.i,".pagination {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  margin: 5vmin;\n  margin-top: 0;\n  padding: 0;\n\n  list-style-type: none;\n}\n\n.pagination-page {\n  --size: 1.8em;\n  font-size: 1.1em;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: var(--size);\n  height: var(--size);\n  margin: 0.7em;\n  border-radius: 5px;\n\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  transition: box-shadow 0.25s, content 1s;\n  animation: slide-from-bottom 1s;\n\n  color: white;\n  background-color: rgba(220, 20, 60, 0.63);\n  box-shadow: 0 0 6px 0 rgba(255, 255, 255, 0.3);\n  box-shadow: 0 0 5px 0px rgba(255, 255, 255, 0.3);\n}\n\n.pagination-page.active {\n  box-shadow: 0 0 12px 7px rgba(255, 255, 255, 0.3);\n}\n\n.pagination-page:hover {\n  box-shadow: 0 0 8px 5px rgba(255, 255, 255, 0.3);\n}\n\n@keyframes slide-from-bottom {\n  from {\n    transform: translate3d(0, 200%, 0);\n    opacity: 0;\n  }\n\n  to {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n\n@media only screen and (min-width: 600px) {\n  .pagination {\n    margin-top: 5vmin;\n  }\n  .pagination-page {\n    border-radius: 0;\n  }\n}\n",""])},function(e,n,t){"use strict";t.r(n);t(2),t(5);function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.subscribers=[]}return function(e,n,t){n&&r(e.prototype,n),t&&r(e,t)}(e,[{key:"subscribe",value:function(e){this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){this.subscribers=this.subscribers.filter(function(n){return n!==e})}},{key:"notify",value:function(e){this.subscribers.forEach(function(n){return n(e)})}}]),e}();function a(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=document.createElement("input"),this.node.classList.add("search"),this.node.type="search",this.node.placeholder="Search the youtube...",this.node.required=!0,this.node.autofocus=!0,this.node.autocomplete="off",this.node.oninput=this.onInput.bind(this),this.timer=null,this.inputEventObserver=new i}return function(e,n,t){n&&a(e.prototype,n),t&&a(e,t)}(e,[{key:"onInput",value:function(){clearTimeout(this.timer),this.timer=setTimeout(this.triggerInputEvent.bind(this),500)}},{key:"triggerInputEvent",value:function(){this.inputEventObserver.notify(this.node.value)}}]),e}(),s=(t(7),t(9),function(e){var n=e.cardData,t=e.dataId,r=document.createElement("article");r.classList.add("card"),r.dataset.id=t;var i=n.id,a=n.statistics,o=n.snippet,s=new Date(o.publishedAt).toDateString(),c=Number(a.viewCount).toLocaleString();return r.innerHTML='\n    <header class="card-header" style="background-image: url(\''.concat(o.thumbnails.medium.url,'\')">\n      <a href="https://www.youtube.com/watch?v=').concat(i,'" target="_blank">\n        <h2>').concat(o.title,'</h2>\n      </a>\n    </header>\n    <section class="card-body">\n      <div class="card-meta-info">\n        <div class="card-channel"><span>Author:</span> ').concat(o.channelTitle,'</div>\n        <div class="card-published"><span>Published:</span> ').concat(s,'</div>\n        <div class="card-viewed"><span>Views:</span> ').concat(c,'</div>\n      </div>\n      <p class="card-description">').concat(o.description,"</p> \n    </section>\n"),r});function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=document.createElement("div"),this.node.classList.add("clips"),this.offsetX=0}return function(e,n,t){n&&c(e.prototype,n),t&&c(e,t)}(e,[{key:"addCards",value:function(e){var n=this,t=this.numberOfCards;e.items.forEach(function(e,r){var i=new s({cardData:e,dataId:t+r});n.node.appendChild(i)})}},{key:"translateX",value:function(e){e&&(this.offsetX+=e),this.node.style.transform="translate3d(".concat(this.offsetX,"px, 0, 0)")}},{key:"translateToCard",value:function(e,n){this.offsetX=-n*e,this.translateX()}},{key:"translateToPage",value:function(e){var n=e.pageIndex,t=e.cardsPerPage,r=e.cardFullWidth,i=n*t;this.translateToCard(i,r)}},{key:"reset",value:function(){this.node.innerHTML="",this.offsetX=0,this.translateX()}},{key:"numberOfCards",get:function(){return this.node.children.length}}]),e}(),l=4,d=1,f="--w",h="--m",p="--cards";function v(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},m=function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},g=function(e,n){var t=getComputedStyle(e).getPropertyValue(n),r=parseInt(t,10);if(Number.isNaN(r))throw new Error("can not parse ".concat(n," from ").concat(e," to integer"));return t.endsWith("vmin")?r*=Math.min(b(),m())/100:t.endsWith("vmax")?r*=Math.max(b(),m())/100:t.endsWith("vh")?r*=m()/100:t.endsWith("vw")&&(r*=b()/100),r},y=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=document.documentElement,this.cardFullWidth=null,this.cardsPerPage=null,this.update()}return function(e,n,t){n&&v(e.prototype,n),t&&v(e,t)}(e,[{key:"update",value:function(){this.calcCardFullWidth(),this.calcCardsPerPage(),this.writeCardsPerPage()}},{key:"calcCardFullWidth",value:function(){var e=this.cardWidth+2*this.cardMargin;this.cardFullWidth=e}},{key:"calcCardsPerPage",value:function(){var e=window.innerWidth,n=Math.trunc(e/this.cardFullWidth);n=Math.max(d,n),n=Math.min(l,n),this.cardsPerPage=n}},{key:"writeCardsPerPage",value:function(){this.element.style.setProperty(p,this.cardsPerPage)}},{key:"cardWidth",get:function(){return g(this.element,f)}},{key:"cardMargin",get:function(){return g(this.element,h)}}]),e}();function w(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageIndex=null,this.variables=new y,this.nextPageToken=void 0,this.totalResults=0,this.pageIndexObserver=new i}return function(e,n,t){n&&w(e.prototype,n),t&&w(e,t)}(e,[{key:"reset",value:function(){this.totalResults=0,this.nextPageToken=void 0,this.setPageIndex(null)}},{key:"setPageIndex",value:function(e){var n=this.boundPageIndex(e);this.pageIndex=n,this.pageIndexObserver.notify({pageIndex:this.pageIndex,cardsPerPage:this.variables.cardsPerPage,cardFullWidth:this.variables.cardFullWidth,totalPages:this.totalPages})}},{key:"goPage",value:function(e){this.setPageIndex(e)}},{key:"goNextPage",value:function(){this.setPageIndex(this.pageIndex+1)}},{key:"goPrevPage",value:function(){this.setPageIndex(this.pageIndex-1)}},{key:"goFirstPage",value:function(){this.setPageIndex(0)}},{key:"boundPageIndex",value:function(e){if(null===e)return e;var n=e;return n<0?n=0:n>=this.totalPages&&(n=this.totalPages-1),n}},{key:"evalPageIndexByCardIndex",value:function(e){return Math.trunc(e/this.variables.cardsPerPage)}},{key:"totalPages",get:function(){return Math.ceil(this.totalResults/this.variables.cardsPerPage)}},{key:"leftVisibleCardIndex",get:function(){return this.variables.cardsPerPage*this.pageIndex}}]),e}(),k={directions:{left:"left",right:"right"},phases:{waiting:"waiting",start:"swipeStart",move:"swipeMove",end:"swipeEnd"},distanceTreshold:{px:100,viewportPercent:8}};function P(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(t.push(o.value),!n||t.length!==n);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function O(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=n,this.onSwipeCallback=t,this.phase=k.phases.waiting,this.startX=null,this.addListeners()}return function(e,n,t){n&&O(e.prototype,n),t&&O(e,t)}(e,[{key:"addListeners",value:function(){var e=this,n={pointerup:this.onPointerUp,pointerdown:this.onPointerDown,pointermove:this.onPointerMove,pointerleave:this.onPointerLeave};Object.entries(n).forEach(function(n){var t=P(n,2),r=t[0],i=t[1];return e.node.addEventListener(r,i.bind(e))})}},{key:"dispatchSwipeEvent",value:function(e){var n=Object.assign({phase:this.phase},e);this.onSwipeCallback(n)}},{key:"onPointerDown",value:function(e){if(this.phase!==k.phases.waiting)throw new Error("two pointer down");this.phase=k.phases.start,this.startX=e.x,this.dispatchSwipeEvent()}},{key:"onPointerUp",value:function(e){if(this.phase===k.phases.move){var n,t=e.x,r={},i=e.x-this.startX,a=Math.min(k.distanceTreshold.px,k.distanceTreshold.viewportPercent*Math.max(document.documentElement.clientWidth,window.innerWidth||0)/100);r.canceled=Math.abs(i)<a,t<this.startX?n=k.directions.left:t>this.startX&&(n=k.directions.right),r.directionX=n,this.phase=k.phases.end,this.dispatchSwipeEvent(r),this.startX=null,this.phase=k.phases.waiting}}},{key:"onPointerMove",value:function(e){if(this.phase!==k.phases.waiting){this.phase=k.phases.move;var n=e.movementX;this.dispatchSwipeEvent({dx:n})}}},{key:"onPointerLeave",value:function(e){this.onPointerUp(e)}}]),e}();function E(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=new u,this.model=new x,this.addListeners()}return function(e,n,t){n&&E(e.prototype,n),t&&E(e,t)}(e,[{key:"addListeners",value:function(){window.onresize=this.onWindowResize.bind(this),this.model.pageIndexObserver.subscribe(this.view.translateToPage.bind(this.view)),this.model.pageIndexObserver.subscribe(this.checkIfMoreDataNeeded.bind(this))}},{key:"reset",value:function(){this.view.reset(),this.model.reset()}},{key:"checkIfMoreDataNeeded",value:function(){null!==this.model.pageIndex&&this.model.nextPageToken&&(Math.trunc(this.view.numberOfCards/this.model.variables.cardsPerPage)-(this.model.pageIndex+1)<4&&this.api.requestNext())}},{key:"onGoToPage",value:function(e){this.model.goPage(e)}},{key:"onResponseOk",value:function(e){var n=e.nextPageToken;void 0===e.prevPageToken&&this.reset(),this.view.addCards(e);var t=e.pageInfo.totalResults;this.model.totalResults=n?t:this.view.numberOfCards,this.model.nextPageToken=n,null===this.model.pageIndex&&this.model.goFirstPage()}},{key:"onResponseErr",value:function(){}},{key:"onWindowResize",value:function(){var e=this.model.leftVisibleCardIndex;this.model.variables.update();var n=this.model.evalPageIndexByCardIndex(e);this.model.goPage(n)}},{key:"onSwipe",value:function(e){switch(e.phase){case k.phases.move:this.onSwipeMove(e);break;case k.phases.end:this.onSwipeEnd(e)}}},{key:"onSwipeEnd",value:function(e){var n=e.directionX;if(e.canceled)this.model.goPage(this.model.pageIndex);else switch(n){case k.directions.left:this.model.goNextPage();break;case k.directions.right:this.model.goPrevPage()}}},{key:"onSwipeMove",value:function(e){var n=e.dx;this.view.translateX(n)}}]),e}(),T=(t(11),function(e){return e+1}),C=function(e){return parseInt(e-1,10)};function j(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L="pagination-page",M="active",R=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=document.createElement("ul"),this.node.classList.add("pagination"),this.callback=n,this.addListeners()}return function(e,n,t){n&&j(e.prototype,n),t&&j(e,t)}(e,[{key:"renderIndicators",value:function(e){if(this.node.innerHTML="",e){var n=document.createDocumentFragment();Array(e).fill().forEach(function(){var e=function(){var e=document.createElement("li");return e.classList.add(L),e}();n.appendChild(e)}),this.node.appendChild(n)}}},{key:"setupIndicators",value:function(e,n){this.indicators.forEach(function(t,r){var i=T(r+e);t.innerHTML=i,i===T(n)?t.classList.add(M):t.classList.remove(M)})}},{key:"addListeners",value:function(){var e=this;this.node.addEventListener("pointerup",function(n){if(n.target.classList.contains(L)){var t=n.target.innerHTML;e.callback(C(t))}})}},{key:"indicators",get:function(){return this.node.querySelectorAll(".".concat(L))}}]),e}();function U(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=new R,this.view.callback=this.onIndicatorSelect.bind(this),this.pageSelectObserver=new i}return function(e,n,t){n&&U(e.prototype,n),t&&U(e,t)}(e,[{key:"goToPage",value:function(e){var n=e.pageIndex,t=e.totalPages;if(null!==n&&0!==t){if(n<0||n>t-1)throw new Error("Pagination: wrong page index ".concat(n));var r=function(e){return Math.min(e,5)}(t),i=function(e,n,t){if(t<=n)return 0;var r=e-Math.trunc(n/2);return r<0?0:r+n>t-1?t-n:r}(n,r,t);r!==this.view.indicators.length&&this.view.renderIndicators(r),r&&this.view.setupIndicators(i,n)}else this.view.renderIndicators(0)}},{key:"onIndicatorSelect",value:function(e){this.pageSelectObserver.notify(e)}}]),e}(),X=function(e){return new Promise(function(n,t){var r=new XMLHttpRequest;r.open("GET",e),r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(200===r.status?n(r.responseText):t(r.responseText))},r.send()})},A={videos:{part:"snippet,statistics",fields:"items(id,snippet(channelTitle,description,publishedAt,thumbnails/medium,title),statistics/viewCount)"},search:{part:"snippet",type:"id",fields:"items(id/videoId),nextPageToken,pageInfo,prevPageToken"}};function W(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var z=function(e,n){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){W(e,n,t[n])})}return e}({},e,n)},q=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AIzaSyCO91lXUmyHSjptIytppH21bKNTF_9pBT8",r=z(A[e],n),i=new URLSearchParams(r);return i.append("key",t),"".concat("https://www.googleapis.com/youtube/v3/").concat(e,"?").concat(i.toString())},D={searchList:function(e){return q("search",e)},videosStats:function(e){return q("videos",e)}};function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){_(e,n,t[n])})}return e}function _(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function H(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.q="",this.nextPageToken="",this.callbackOK=void 0,this.callbackErr=void 0}return function(e,n,t){n&&H(e.prototype,n),t&&H(e,t)}(e,[{key:"requestNext",value:function(){this.request(this.q,this.nextPageToken)}},{key:"request",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e&&""!==e){this.q=e;var t={};X(D.searchList({q:e,pageToken:n})).then(function(e){var n=JSON.parse(e);t=n;var r=n.items.map(function(e){return e.id.videoId}).join(",");return X(D.videosStats({id:r}))}).then(function(e){var n=JSON.parse(e);return F({},t,n)}).then(this.onSearchOk.bind(this)).catch(this.onSearchErr.bind(this))}}},{key:"onSearchOk",value:function(e){this.nextPageToken=e.nextPageToken,this.callbackOK(F({},e,{q:this.q}))}},{key:"onSearchErr",value:function(e){this.callbackOK(e)}}]),e}(),G=function(){var e=document.createElement("div");return e.classList.add("app"),e}(),J=function(){var e=document.createElement("div");return e.classList.add("bottom"),e}(),K=new N,V=new S,$=new o;V.model.pageIndexObserver.subscribe(K.goToPage.bind(K)),K.pageSelectObserver.subscribe(V.onGoToPage.bind(V));new I(J,V.onSwipe.bind(V));var Y=new B;Y.callbackOK=V.onResponseOk.bind(V),Y.callbackErr=V.onResponseErr.bind(V),$.inputEventObserver.subscribe(Y.request.bind(Y)),V.api=Y,document.body.appendChild(G),G.appendChild($.node),G.appendChild(J),J.appendChild(V.view.node),G.appendChild(K.view.node)}]);
//# sourceMappingURL=main.js.map